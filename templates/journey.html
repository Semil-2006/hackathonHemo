<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/global.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/perfil.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/campanhas_admin.css') }}"
    />

    <style>
      .error-message {
        color: red;
        text-align: center;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <!-- Mascote e Informa√ß√µes -->
    <div class="mascote-section">
      <div class="mascote-card">
        <figure class="mascote-figure">
          <!-- MUDAN√áA 3: Caminho da imagem corrigido -->
          <img
            class="mascote-image"
            src="{{ url_for('static', filename='assets/gotinha1.png') }}"
            alt="Hemo - Mol√©cula Guia"
            onerror="this.src='https://placehold.co/150x150/fecaca/b91c1c?text=Hemo';"
          />
          <figcaption class="mascote-caption">
            Ol√°, sou Hemo sua mol√©cula guia!
            <br />Clique para participar das campanhas apenas quando seu sangue
            for compat√≠vel com quem precisa. <br />Assim sua doa√ß√£o far√° a
            diferen√ßa no momento certo!
          </figcaption>
        </figure>

        <div class="info-card">
          <h3 class="info-title">üí° Como funciona?</h3>
          <ul class="info-list">
            <li>‚Ä¢ Escolha campanhas compat√≠veis com seu tipo sangu√≠neo</li>
            <li>‚Ä¢ Clique em "Participar" para se inscrever</li>
            <li>‚Ä¢ Receba lembretes e informa√ß√µes da campanha</li>
            <li>‚Ä¢ Sua doa√ß√£o ser√° direcionada para quem mais precisa</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="profile-card">
      <h2 class="card-title">Minha Jornada de Doador</h2>

      <div class="gamification-level">
        <div class="level-info">
          <span class="level-title">N√≠vel Atual:</span>
          <span class="level-name" id="user-level">
            <svg
              class="level-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              />
            </svg>
            {{ usuario.nivel | default('Doador Iniciante') }}
          </span>
        </div>
        <div class="progress-bar-container">
          <div
            class="progress-bar"
            id="user-progress"
            style="width: {{ usuario.progressoPercentual | default(0) }}%;"
          ></div>
        </div>
        <div
          style="
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.5rem;
          "
        >
          <span class="progress-label"
            >{% if usuario.next_level_name %}Progresso para {{
            usuario.next_level_name }}{% else %}Progresso{% endif %}</span
          >
          <span class="progress-count" style="font-weight: 600; color: #dc2626"
            >{{ usuario.progress_text }}</span
          >
          {% if usuario.participations_to_next is not none and
          usuario.participations_to_next > 0 %}
          <span
            class="progress-remaining"
            style="color: #6b7280; font-size: 0.9rem"
            >({{ usuario.participations_to_next }} faltam para o pr√≥ximo
            n√≠vel)</span
          >
          {% endif %}
        </div>
      </div>

      <div class="badges-section">
        <h3 class="badges-title">Conquistas</h3>
        <div class="badges-container" id="user-badges">
          {% if usuario.selos %} {% for selo in usuario.selos %}
          <div class="badge" title="{{ selo.nome }}">
            <img
              src="{{ url_for('static', filename=selo.caminhoImagem) }}"
              alt="{{ selo.nome }}"
              class="badge-image"
              onerror="this.src='https://placehold.co/64x64/e0e0e0/b0b0b0?text=Selo';"
            />
          </div>
          {% endfor %} {% else %}
          <p class="info-data">Nenhuma conquista ainda.</p>
          {% endif %}
          <div class="badge badge-locked" title="Her√≥i (10 doa√ß√µes)">
            <img
              src="{{ url_for('static', filename='assets/emblemas/3.png') }}"
              alt="Selo Her√≥i (Bloqueado)"
              class="badge-image"
              onerror="this.src='https://placehold.co/64x64/e0e0e0/b0b0b0?text=Selo';"
            />
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='scripts/global.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/perfil.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
  </body>
</html>
