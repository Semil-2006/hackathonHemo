<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Campanha - Admin</title>

    <!-- Flowbite CSS -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />
    
    <!-- Quill.js Editor CSS (Necess√°rio para o editor de texto) -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <!-- Seus Estilos Globais -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/global.css') }}">
    
    <!-- Estilos do Painel Admin (Reaproveitados) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/dashboard_admin.css') }}">

    <!-- Estilos de Cadastro (reaproveitar componentes de formul√°rio) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/cadastro.css') }}">
    <!-- Estilos desta p√°gina -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/enviar_email.css') }}">
</head>
<body>
    <!-- Header include -->
    {% include 'components/sidebar.html' %}

    <!-- Container principal da p√°gina (classe 'main-content-campaign' do CSS) -->
    <main style="padding: 32px;">
    <div class="registration-container" >
    <form id="campaign-form">

            <!-- (RF03) Seletor de Canal de Disparo (E-mail vs WhatsApp) -->
            <fieldset>
                <legend>1. Canal de Disparo</legend>
                <p class="fieldset-subtitle">Selecione por onde esta campanha ser√° enviada.</p>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <input id="channel-type-email" name="channel-type" type="radio" value="email" class="w-4 h-4" checked>
                        <label for="channel-type-email" class="ml-2 text-sm font-medium">‚úâÔ∏è E-mail</label>
                    </div>
                    <div class="flex items-center">
                        <input id="channel-type-whatsapp" name="channel-type" type="radio" value="whatsapp" class="w-4 h-4">
                        <label for="channel-type-whatsapp" class="ml-2 text-sm font-medium">üí¨ Canal WhatsApp</label>
                    </div>
                </div>
            </fieldset>

            <!-- (RF03 - Crit√©rio 1) Segmenta√ß√£o de Doadores -->
            <fieldset>
                <legend>2. Segmenta√ß√£o de Doadores</legend>
                <p class="fieldset-subtitle">Selecione quem ir√° receber esta mensagem.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Tipo Sangu√≠neo (com consentimento) -->
                    <div>
                        <label for="seg-tipo-sanguineo" class="block mb-2 text-sm font-medium text-gray-900">Tipo Sangu√≠neo</label>
                        <select id="seg-tipo-sanguineo" multiple class="form-input">
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                        </select>
                        <small>Nota: Apenas doadores com consentimento expl√≠cito.</small>
                    </div>
                    <!-- Cidade -->
                    <div>
                        <label for="seg-cidade" class="block mb-2 text-sm font-medium text-gray-900">Cidade</label>
                        <select id="seg-cidade" multiple class="form-input">
                            <!-- Popular via JS ou backend -->
                            <option value="Brasilia">Bras√≠lia</option>
                            <option value="Goiania">Goi√¢nia</option>
                        </select>
                    </div>
                    <!-- Classifica√ß√£o -->
                    <div>
                        <label for="seg-classificacao" class="block mb-2 text-sm font-medium text-gray-900">Classifica√ß√£o</label>
                        <select id="seg-classificacao" class="form-input">
                            <option value="todos">Todos</option>
                            <option value="primeira_vez">Primeira Vez</option>
                            <option value="esporadico">Espor√°dico</option>
                            <option value="regular">Regular</option>
                        </select>
                    </div>
                    <!-- G√™nero -->
                    <div>
                        <label for="seg-genero" class="block mb-2 text-sm font-medium text-gray-900">G√™nero</label>
                        <select id="seg-genero" class="form-input">
                            <option value="">Qualquer</option>
                            <option value="Masculino">Masculino</option>
                            <option value="Feminino">Feminino</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <!-- Faixa et√°ria -->
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-900">Faixa et√°ria (anos)</label>
                        <div class="flex space-x-2">
                            <input id="seg-min-age" type="number" min="0" placeholder="M√≠n" class="form-input" style="width:100px;">
                            <input id="seg-max-age" type="number" min="0" placeholder="M√°x" class="form-input" style="width:100px;">
                        </div>
                        <small>Deixe em branco para n√£o filtrar por idade.</small>
                    </div>
                    <!-- Interesse -->
                    <div>
                        <label for="seg-interesse" class="block mb-2 text-sm font-medium text-gray-900">Interesse</label>
                        <select id="seg-interesse" class="form-input">
                            <option value="todos">Todos</option>
                            <option value="sim">Com interesse em doar</option>
                            <option value="nao">Sem interesse</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <!-- (RF03 - Crit√©rio 3) Conte√∫do da Mensagem -->

            <!-- Formul√°rio de E-MAIL (com editor rico) -->
            <div id="form-for-email">
                <fieldset>
                    <legend>3. Conte√∫do do E-mail</legend>
                    <!-- Personaliza√ß√£o do Remetente -->
                    <div>
                        <label for="msg-remetente" class="block mb-2 text-sm font-medium text-gray-900">Nome do Remetente</label>
                        <input type="text" id="msg-remetente" class="form-input" value="Equipe Hemocentro">
                    </div>
                    <!-- Editor de Texto (Negrito, It√°lico, etc.) -->
                    <div style="margin-top: 16px;">
                        <label class="block mb-2 text-sm font-medium text-gray-900">Mensagem</label>
                        <div id="editor-container">
                            <p>Ol√°, [nome_doador]!</p>
                            <p>Escreva sua <strong>mensagem</strong> aqui...</p>
                        </div>
                    </div>
                </fieldset>
            </div>

            <!-- Formul√°rio do CANAL WHATSAPP (s√≥ texto simples) -->
                <div id="form-for-whatsapp" style="display: none;">
                <fieldset>
                    <legend>3. Mensagem para o Canal WhatsApp</legend>
                    <p class="fieldset-subtitle">
                        A segmenta√ß√£o por Tipo Sangu√≠neo selecionar√° qual canal ser√° usado 
                        (ex: "Alerta A+"). A mensagem √© texto simples.
                    </p>
                    <label for="whatsapp-message" class="block mb-2 text-sm font-medium">Mensagem Simples</label>
                    <textarea id="whatsapp-message" rows="4" class="form-input"></textarea>
                </fieldset>
            </div>

            <!-- (RF03 - Crit√©rio 3) Agendamento e Envio -->
            <fieldset>
                <legend>4. Envio e Agendamento</legend>
                <div>
                    <label for="camp-agendamento" class="block mb-2 text-sm font-medium text-gray-900">Agendar envio para:</label>
                    <input type="datetime-local" id="camp-agendamento" class="form-input">
                    <small>Deixe em branco para enviar imediatamente.</small>
                </div>
            </fieldset>

            <!-- Bot√µes de A√ß√£o -->
            <div class="campaign-actions">
                <button type="button" id="btn-enviar-agora" class="submit-button">
                    Enviar Agora
                </button>
                <button type="button" id="btn-agendar" class="form-input" style="width:auto;padding:0.5rem 1rem;">
                    Salvar Agendamento
                </button>
            </div>
        </form>
        </div>
    </main>

    <!-- Footer include -->
    {% include 'components/footer.html' %}

    <!-- Scripts de Bibliotecas (Flowbite, Quill.js) -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    
    <!-- Seu Script JS separado -->
    <script src="{{ url_for('static', filename='scripts/enviar_email.js') }}" defer></script>
</body>
</html>