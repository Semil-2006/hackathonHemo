<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campanhas de Doa√ß√£o</title>

    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css"
      rel="stylesheet"
    />
    
    <!-- 
      MUDAN√áA 1: Caminhos de CSS corrigidos para a pasta 'static' 
    -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/campanhas.css') }}">
</head>
<body>

    <!-- 
      MUDAN√áA 2: 'include' do Jinja2 para o header 
    -->
    {% include 'components/header.html' %}

    <main class="main-content">
        <!-- Conte√∫do Principal -->
        <div class="campanhas-container">
            <div class="campanhas-layout">
                <!-- Mascote e Informa√ß√µes -->
                <div class="mascote-section">
                    <div class="mascote-card">
                        <figure class="mascote-figure">
                            <!-- MUDAN√áA 3: Caminho da imagem corrigido -->
                            <img class="mascote-image" src="{{ url_for('static', filename='assets/gotinha1.png') }}" alt="Hemo - Mol√©cula Guia" onerror="this.src='https://placehold.co/150x150/fecaca/b91c1c?text=Hemo';">
                            <figcaption class="mascote-caption">
                                Ol√°, sou Hemo sua mol√©cula guia!
                                <br>Clique para participar das campanhas apenas quando seu sangue for compat√≠vel com quem precisa.
                                <br>Assim sua doa√ß√£o far√° a diferen√ßa no momento certo!
                            </figcaption>
                        </figure>
                        
                        <div class="info-card">
                            <h3 class="info-title">üí° Como funciona?</h3>
                            <ul class="info-list">
                                <li>‚Ä¢ Escolha campanhas compat√≠veis com seu tipo sangu√≠neo</li>
                                <li>‚Ä¢ Clique em "Participar" para se inscrever</li>
                                <li>‚Ä¢ Receba lembretes e informa√ß√µes da campanha</li>
                                <li>‚Ä¢ Sua doa√ß√£o ser√° direcionada para quem mais precisa</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Lista de Campanhas -->
                <div class="campanhas-section">
                    <div class="campanhas-header">
                        <h2 class="campanhas-title">Campanhas Ativas</h2>
                        <p class="campanhas-subtitle">Encontre a campanha ideal para sua doa√ß√£o</p>
                    </div>

                    <!-- Tabela de Campanhas -->
                    <div class="campanhas-table-container">
                        <table class="campanhas-table">
                            <thead class="table-header">
                                <tr>
                                    <th scope="col" class="table-head">Nome da Campanha</th>
                                    <th scope="col" class="table-head">Tipo Sangu√≠neo</th>
                                    <th scope="col" class="table-head">A√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody id="campanhasTableBody">
                                <!-- O JS vai preencher esta linha -->
                                <tr class="table-row">
                                    <td colspan="3" class="table-loading">
                                        Carregando campanhas...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Estat√≠sticas -->
                    <div class="estatisticas-grid">
                        <div class="estatistica-card">
                            <div class="estatistica-number" id="totalCampanhas">0</div>
                            <div class="estatistica-label">Campanhas Ativas</div>
                        </div>
                        <div class="estatistica-card">
                            <div class="estatistica-number" id="totalParticipantes">0</div>
                            <div class="estatistica-label">Participantes</div>
                        </div>
                        <div class="estatistica-card">
                            <div class="estatistica-number" id="vagasDisponiveis">0</div>
                            <div class="estatistica-label">Vagas Dispon√≠veis</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-container">
            <h3 class="modal-title">Confirmar Participa√ß√£o</h3>
            <p class="modal-message" id="modalMessage">Voc√™ tem certeza que deseja participar desta campanha?</p>
            <div class="modal-actions">
                <button onclick="fecharModal()" class="modal-button-cancel">Cancelar</button>
                <button onclick="confirmarParticipacao()" class="modal-button-confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- 
      MUDAN√áA 4: 'include' do Jinja2 para o footer 
    -->
    {% include 'components/footer.html' %}

    <!-- 
      MUDAN√áA 5: Caminhos de JS corrigidos para a pasta 'static' 
    -->
    <script src="{{ url_for('static', filename='scripts/global.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/list_campanhas.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/campanhas.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
</body>
</html>